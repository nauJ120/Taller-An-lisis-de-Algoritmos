import random
import matplotlib.pyplot as plt
import pandas as pd
import time

tiempo_busqueda_id = 0
tiempo_busqueda_nombre = 0

def generar_registros(numRegistros):
    registros = []

    for i in range(1, numRegistros + 1):
        id = i
        cadena = ''.join(random.choices('abcdefghijklmnopqrstuvwxyz', k=5))
        edad = random.randint(18, 99)
        buleano = random.choice([True, False])
        registros.append([id, cadena, edad, buleano])

    return registros


def buscarPorId(lista, valor):
    global tiempo_busqueda_id
    izq = 0
    der = len(lista) - 1
    encontrado = False
    inicio = time.time()
    while izq <= der and not encontrado:
        medio = (izq + der) // 2
        if lista[medio][0] == valor:
            encontrado = True
        else:
            if valor < lista[medio][0]:
                der = medio - 1
            else:
                izq = medio + 1
    fin = time.time()
    tiempo_busqueda_id += fin - inicio
    return encontrado, medio


def buscarPorNombre(lista, valor):
    global tiempo_busqueda_nombre
    posicion = 0
    encontrado = False
    inicio = time.time()
    while posicion < len(lista) and not encontrado:
        if lista[posicion][1] == valor:
            encontrado = True
        else:
            posicion += 1
    fin = time.time()
    tiempo_busqueda_nombre += fin - inicio
    return encontrado, posicion


def graficar_tiempo():
    etiquetas = ['Búsqueda por ID', 'Búsqueda por nombre']
    tiempos = [tiempo_busqueda_id, tiempo_busqueda_nombre]

    plt.bar(etiquetas, tiempos, color=['blue', 'green'])
    plt.xlabel('Tipo de Búsqueda')
    plt.ylabel('Tiempo (segundos)')
    plt.title('Comparación de Tiempos de Búsqueda')
    plt.show()


numRegistros = 500000
lista_registros = generar_registros(numRegistros)

while True:
    print("\nMenú:")
    print("1. Buscar por Id")
    print("2. Buscar por nombre")
    print("3. Mostrar gráfica de tiempos")
    print("4. Salir")

    opcion = input("Seleccione una opción (1, 2, 3, o 4): ")

    if opcion == "1":
        valor = int(input("Ingrese el valor a buscar: "))
        encontrado, posicion = buscarPorId(lista_registros, valor)

        if encontrado:
            print(f"El valor {valor} se encuentra en la posición {posicion}.")
            registro_encontrado = lista_registros[posicion]
            print("ID:", registro_encontrado[0])
            print("Nombre:", registro_encontrado[1])
            print("Edad:", registro_encontrado[2])
            print("Paga impuesto:", registro_encontrado[3])
        else:
            print(f"El valor {valor} no se encuentra en la lista.")

    elif opcion == "2":
        valor = input("Ingrese el nombre a buscar: ")
        encontrado, posicion = buscarPorNombre(lista_registros, valor)

        if encontrado:
            print(f"El valor {valor} se encuentra en la posición {posicion}.")
            registro_encontrado = lista_registros[posicion]
            print("ID:", registro_encontrado[0])
            print("Nombre:", registro_encontrado[1])
            print("Edad:", registro_encontrado[2])
            print("Paga impuesto:", registro_encontrado[3])
        else:
            print(f"El valor {valor} no se encuentra en la lista.")

    elif opcion == "3":
        graficar_tiempo()

    elif opcion == "4":
        print("Saliendo del programa. ¡Hasta luego!")
        break
    else:
        print("Opción no válida. Por favor, seleccione 1, 2, 3 o 4.")

